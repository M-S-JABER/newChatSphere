# قائمة تحقق ضمان الجودة للوسائط

نفّذ السيناريوهات اليدوية التالية على نسخة جديدة. تأكد من السلوك المتوقع
على سطح المكتب (Chrome) وعلى محاكي شاشة الهاتف.

1. **صورة واردة (JPG/PNG/WEBP)**
   - أرسل صورة إلى رقم واتساب.
   - المتوقع: تظهر فقاعة مع صورة مصغرة خلال ~2 ثوانٍ، ويتم تحميلها تدريجيًا
     وتفتح الصورة بالحجم الكامل في تبويب جديد عند النقر.

2. **ملف PDF وارد (حتى 10MB)**
   - أرسل ملف PDF صغير.
   - المتوقع: يظهر معاينة للصفحة الأولى، وتظهر طبقة بها اسم الملف والحجم،
     والنقر يفتح عارض PDF/التنزيل في تبويب جديد.

3. **ملفات DOCX / XLSX / TXT / ZIP واردة**
   - أرسل نموذجًا من كل نوع.
   - المتوقع: تعرض الفقاعة أيقونة نوع الملف واسم الملف والحجم بصيغة منسقة؛
     زر التنزيل يجلب الملف بنجاح.

4. **رابط وسائط منتهي**
   - أعد إرسال webhook بعد حذف الملف المخزن يدويًا أو بعد انتهاء التوقيع.
   - المتوقع: الاستيراد يعيد طلب رابط Graph جديد، ويعيد إنشاء الملف، ويرسل
     `message_media_updated` بدون تدخل المستخدم.

5. **خدمة المصغرات غير متاحة**
   - غيّر اسم ملف `sharp` مؤقتًا أو اضبط `MEDIA_THUMBNAIL_MAX_WIDTH=0` وأعد التشغيل.
   - المتوقع: الواجهة تعرض "Attachment unavailable" مع بقاء بطاقة التنزيل
     فعّالة؛ السجلات تحتوي على خطأ يمكن التعامل معه.

6. **استجابة الهاتف**
   - غيّر العرض إلى 420px تقريبًا.
   - المتوقع: المصغرات تتناسب مع العرض، وأهداف اللمس تبقى حوالي 44px، وملصقات
     قارئ الشاشة تصف المرفقات.
